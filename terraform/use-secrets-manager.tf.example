# Alternative: Retrieve DB password from AWS Secrets Manager
# Rename this file to use-secrets-manager.tf to enable

# Retrieve existing secret
data "aws_secretsmanager_secret" "db_password" {
  name = "sweetdream/db/password"
}

data "aws_secretsmanager_secret_version" "db_password" {
  secret_id = data.aws_secretsmanager_secret.db_password.id
}

# Use in locals
locals {
  db_password_from_secrets = jsondecode(data.aws_secretsmanager_secret_version.db_password.secret_string)["password"]
}

# Then in your RDS module, use:
# db_password = local.db_password_from_secrets
# Instead of: db_password = var.db_password
